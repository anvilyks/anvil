editor.on('asset:upload:end', () => {
  console.log('[2] Asset upload finished');
  // Tutaj można odpalić funkcję `loadProject()`
});


function waitForAssetsThenLoad(project) {
  const maxTries = 20;
  let tries = 0;

  const checkAssets = setInterval(() => {
    const assets = editor.AssetManager.getAll().models;

    if (assets.length > 0 || tries > maxTries) {
      clearInterval(checkAssets);
      console.log("[✅] Assets ready, loading project");
      editor.loadProjectData(project);
    } else {
      console.log("[…] Waiting for assets to be available...");
      tries += 1;
    }
  }, 200);
